/*******************************************************************************
 * StringSubscriptTests.swift                                                  *
 * CoreKit CopyrightÂ© 2019; Electric Bolt Limited.                             *
 ******************************************************************************/

import XCTest
@testable import CoreKit

class StringUtilityTests: XCTestCase {
    
    override func setUp() {
    }
    
    override func tearDown() {
    }
    
    func testSplit() {
        // 1 character
        
        var messages = "".split(largestLength: 256, splitLength: 240)
        XCTAssertEqual(1, messages.count)
        XCTAssertEqual("", messages[0])
        
        // 3 characters
        
        messages = "abc".split(largestLength: 256, splitLength: 240)
        XCTAssertEqual(1, messages.count)
        XCTAssertEqual("abc", messages[0])
        
        // 254 characters
        
        //                10        20        30        40        50        60        70        80        90        100       110       120       130       140       150       160       170       180       190       200       210       220       230       240       250 254
        var s = "12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234"
        XCTAssertEqual(s.count, 254)
        messages = s.split(largestLength: 256, splitLength: 240)
        XCTAssertEqual(1, messages.count)
        XCTAssertEqual(s, messages[0])
        
        // 255 characters
        
        //            10        20        30        40        50        60        70        80        90        100       110       120       130       140       150       160       170       180       190       200       210       220       230       240       250  255
        s = "123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345"
        XCTAssertEqual(s.count, 255)
        messages = s.split(largestLength: 256, splitLength: 240)
        XCTAssertEqual(1, messages.count)
        XCTAssertEqual(s, messages[0])
        
        // 256 characters
        
        //            10        20        30        40        50        60        70        80        90        100       110       120       130       140       150       160       170       180       190       200       210       220       230       240       250   256
        s = "1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456"
        XCTAssertEqual(s.count, 256)
        messages = s.split(largestLength: 256, splitLength: 240)
        XCTAssertEqual(1, messages.count)
        XCTAssertEqual(s, messages[0])
        
        // 257 characters
        
        //            10        20        30        40        50        60        70        80        90        100       110       120       130       140       150       160       170       180       190       200       210       220       230       240       250    257
        s = "12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567"
        XCTAssertEqual(s.count, 257)
        messages = s.split(largestLength: 256, splitLength: 240)
        XCTAssertEqual(2, messages.count)
        //                 10        20        30        40        50        60        70        80        90        100       110       120       130       140       150       160       170       180       190       200       210       220       230       240
        var s1 = "123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890"
        var s2 = "12345678901234567"
        XCTAssertEqual(s1.count, 240)
        XCTAssertEqual(s2.count, 17)
        XCTAssertEqual(s1, messages[0])
        XCTAssertEqual(s2, messages[1])
        
        // 263 characters
        
        //            10        20        30        40        50        60        70        80        90        100       110       120       130       140       150       160       170       180       190       200       210       220       230       240       250          263
        s = "12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123"
        XCTAssertEqual(s.count, 263)
        messages = s.split(largestLength: 256, splitLength: 240)
        XCTAssertEqual(2, messages.count)
        //             10        20        30        40        50        60        70        80        90        100       110       120       130       140       150       160       170       180       190       200       210       220       230       240
        s1 = "123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890"
        s2 = "12345678901234567890123"
        XCTAssertEqual(s1.count, 240)
        XCTAssertEqual(s2.count, 23)
        XCTAssertEqual(s1, messages[0])
        XCTAssertEqual(s2, messages[1])
        
        // 479 characters
        
        //            10        20        30        40        50        60        70        80        90        100       110       120       130       140       150       160       170       180       190       200       210       220       230       240       250       260       270       280       290       300       310       320       330       340       350       360       370       380       390       400       410       420       430       440       450       460       470      479
        s = "12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789"
        XCTAssertEqual(s.count, 479)
        messages = s.split(largestLength: 256, splitLength: 240)
        XCTAssertEqual(2, messages.count)
        //             10        20        30        40        50        60        70        80        90        100       110       120       130       140       150       160       170       180       190       200       210       220       230       240
        s1 = "123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890"
        s2 = "12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789"
        XCTAssertEqual(s1.count, 240)
        XCTAssertEqual(s2.count, 239)
        XCTAssertEqual(s1, messages[0])
        XCTAssertEqual(s2, messages[1])
        
        // 480 characters
        
        //            10        20        30        40        50        60        70        80        90        100       110       120       130       140       150       160       170       180       190       200       210       220       230       240       250       260       270       280       290       300       310       320       330       340       350       360       370       380       390       400       410       420       430       440       450       460       470       480
        s = "123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890"
        XCTAssertEqual(s.count, 480)
        messages = s.split(largestLength: 256, splitLength: 240)
        XCTAssertEqual(2, messages.count)
        //             10        20        30        40        50        60        70        80        90        100       110       120       130       140       150       160       170       180       190       200       210       220       230       240
        s1 = "123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890"
        s2 = "123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890"
        XCTAssertEqual(s1.count, 240)
        XCTAssertEqual(s2.count, 240)
        XCTAssertEqual(s1, messages[0])
        XCTAssertEqual(s2, messages[1])
        
        // 481 characters
        
        //            10        20        30        40        50        60        70        80        90        100       110       120       130       140       150       160       170       180       190       200       210       220       230       240       250       260       270       280       290       300       310       320       330       340       350       360       370       380       390       400       410       420       430       440       450       460       470        481
        s = "1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901"
        XCTAssertEqual(s.count, 481)
        messages = s.split(largestLength: 256, splitLength: 240)
        XCTAssertEqual(3, messages.count)
        //             10        20        30        40        50        60        70        80        90        100       110       120       130       140       150       160       170       180       190       200       210       220       230       240
        s1 = "123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890"
        s2 = "123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890"
        let s3 = "1"
        XCTAssertEqual(s1.count, 240)
        XCTAssertEqual(s2.count, 240)
        XCTAssertEqual(s3.count, 1)
        XCTAssertEqual(s1, messages[0])
        XCTAssertEqual(s2, messages[1])
        XCTAssertEqual(s3, messages[2])
    }
    
    func testRemovePrefix() {
        XCTAssertEqual("", "".removePrefix(""))
        XCTAssertEqual("abc", "abc".removePrefix(""))
        XCTAssertEqual("abc123", "abc123".removePrefix("123"))
        XCTAssertEqual("123", "abc123".removePrefix("abc"))
        XCTAssertEqual("", "abc123".removePrefix("abc123"))
        
        // Unicode characters. 2665=black heart (â¥) 1f496=sparkling heart (ð)
        XCTAssertEqual("\u{2665}\u{1f496}!", "Hello,\u{2665}\u{1f496}!".removePrefix("Hello,"))
        XCTAssertEqual("\u{1f496}!", "Hello,\u{2665}\u{1f496}!".removePrefix("Hello,\u{2665}"))
        XCTAssertEqual("!", "Hello,\u{2665}\u{1f496}!".removePrefix("Hello,\u{2665}\u{1f496}"))
    }
    
    func testRemoveSuffix() {
        XCTAssertEqual("", "".removeSuffix(""))
        XCTAssertEqual("abc", "abc".removeSuffix(""))
        XCTAssertEqual("abc", "abc123".removeSuffix("123"))
        XCTAssertEqual("abc123", "abc123".removeSuffix("abc"))
        XCTAssertEqual("", "abc123".removeSuffix("abc123"))
        
        // Unicode characters. 2665=black heart (â¥) 1f496=sparkling heart (ð)
        XCTAssertEqual("Hello,", "Hello,\u{2665}\u{1f496}!".removeSuffix("\u{2665}\u{1f496}!"))
        XCTAssertEqual("Hello,\u{2665}", "Hello,\u{2665}\u{1f496}!".removeSuffix("\u{1f496}!"))
    }
    
    func testLeft() {
        XCTAssertEqual("", "".left(-1))
        XCTAssertEqual("", "".left(0))
        XCTAssertEqual("", "".left(1))
        XCTAssertEqual("", "my dog has fleas".left(0))
        XCTAssertEqual("m", "my dog has fleas".left(1))
        XCTAssertEqual("my dog", "my dog has fleas".left(6))
        XCTAssertEqual("my dog has fleas", "my dog has fleas".left(50))
        
        // Unicode characters. 2665=black heart (â¥) 1f496=sparkling heart (ð)
        XCTAssertEqual("Hello,", "Hello,\u{2665}\u{1f496}!".left(6))
        XCTAssertEqual("Hello,\u{2665}", "Hello,\u{2665}\u{1f496}!".left(7))
        XCTAssertEqual("Hello,\u{2665}\u{1f496}", "Hello,\u{2665}\u{1f496}!".left(8))
        XCTAssertEqual("Hello,\u{2665}\u{1f496}!", "Hello,\u{2665}\u{1f496}!".left(9))
        XCTAssertEqual("Hello,\u{2665}\u{1f496}!", "Hello,\u{2665}\u{1f496}!".left(10))
        XCTAssertEqual("Hello,\u{2665}\u{1f496}!", "Hello,\u{2665}\u{1f496}!".left(50))
    }
    
    func testRight() {
        XCTAssertEqual("", "".right(-1))
        XCTAssertEqual("", "".right(0))
        XCTAssertEqual("", "".right(1))
        XCTAssertEqual("", "my dog has fleas".right(0))
        XCTAssertEqual("s", "my dog has fleas".right(1))
        XCTAssertEqual(" fleas", "my dog has fleas".right(6))
        XCTAssertEqual("my dog has fleas", "my dog has fleas".left(50))
        
        // Unicode characters. 2665=black heart (â¥) 1f496=sparkling heart (ð)
        XCTAssertEqual("!", "Hello,\u{2665}\u{1f496}!".right(1))
        XCTAssertEqual("\u{1f496}!", "Hello,\u{2665}\u{1f496}!".right(2))
        XCTAssertEqual("\u{2665}\u{1f496}!", "Hello,\u{2665}\u{1f496}!".right(3))
        XCTAssertEqual(",\u{2665}\u{1f496}!", "Hello,\u{2665}\u{1f496}!".right(4))
        XCTAssertEqual("o,\u{2665}\u{1f496}!", "Hello,\u{2665}\u{1f496}!".right(5))
        XCTAssertEqual("Hello,\u{2665}\u{1f496}!", "Hello,\u{2665}\u{1f496}!".right(50))
    }
    
}
